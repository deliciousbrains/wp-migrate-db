"use strict";(self.webpackJSONPwpmdb=self.webpackJSONPwpmdb||[]).push([[85],{17085:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(89379),i=n(52888),l=n(45494),s=n(82511),r=n(57269),o=n(58168),c=n(83649),p=n.n(c),u=n(95274),m=n(51572),d=n(94263),_=n.n(d);const g=(0,s.Ng)(e=>({theme_plugin_files:e.theme_plugin_files,panel_info:e.panels,local_version:e.migrations.local_site.theme_plugin_files_version}),{})(e=>{var t="",n=e.theme_plugin_files,a=e.panelsOpen,s=e.selected,r=e.items,o=e.type;if(!_()(a,o)&&(n[o]||{}).enabled){if(t=e.summary,["other_files","muplugin_files"].includes(o)){if(0===s.length)return i.createElement("span",{className:"empty-warning"},(0,l.__)("Empty selection","wp-migrate-db"));var c=[];r.forEach(e=>{s.includes(e.path)&&c.push(e.name)}),t=c.join(", ")}"core_files"===o&&(t=(0,l.__)("Export all Core files","wp-migrate-db"))}return i.createElement(i.Fragment,null,(0,u.Ay)(t))});var h=n(46970),v=n(80506),f=n(7220),b=n(31775);const E=e=>{var t=e.ariaLabel,n=e.optionChoices,a=e.type,l=e.value,r=(0,s.wA)(),o=n,c=t=>{r(e.updateOption(t.target.value,a))},p=Object.keys(o).map(e=>{var t=a+"-"+e,n=l===e;return i.createElement("div",{key:e},i.createElement("input",{id:t,type:"radio",value:e,checked:n,onChange:c,name:a}),i.createElement("label",{htmlFor:t},(0,u.Ay)(o[e])))});return i.createElement("div",{className:"radiogroup",role:"radiogroup","aria-label":t},p)};var w=n(23617),y=n(16930),x=n(33782),O=n(17780);function P(e,t,n,a,i){var l=((e,t,n)=>{var a=[];if("object"===typeof t){var i=Object.values(t).map(e=>e[0].path);"selected"===n["".concat(e,"_option")]&&n["".concat(e,"_selected")].forEach(e=>{i.includes(e)&&a.push(e)}),"except"===n["".concat(e,"_option")]&&n["".concat(e,"_excluded")].forEach(e=>{i.includes(e)&&a.push(e)}),"active"===n["".concat(e,"_option")]&&Object.values(t).forEach(e=>{e[0].active&&a.push(e[0].path)}),"all"===n["".concat(e,"_option")]&&(a=i)}return a})(a,i.site_details[a],e),s={themes:"theme_files",plugins:"plugin_files",muplugins:"muplugin_files",others:"other_files",core:"core_files"},r=(e[s[a]]||{}).enabled;return{enabled:void 0!==r&&r,isOpen:t.includes(s[a]),selected:l,selectionEmpty:p()(n,{name:"SELECTED_".concat(a.toUpperCase(),"_EMPTY")})}}const A=(e,t)=>{var n=e.theme_plugin_files,a=e.panelsOpen,c=e.current_migration,p=e.remote_site,d=e.local_site,_=c.status,A=c.intent,S=(0,f.d)(e),C=(0,s.wA)(),N=t.title,k=t.type,j=t.panel_name,F=t.items,T=()=>"savefile"===A?F:F.filter(e=>!1===e.path.includes("wp-migrate-db")),L=F.map(e=>e.path),I=!1,U={push:"Push",pull:"Pull",savefile:"Export"},W={all:(0,l.nv)((0,l.__)("%s all %s","wp-migrate-db"),U[A],k),active:(0,l.nv)((0,l.__)("%s only active %s","wp-migrate-db"),U[A],k),selected:(0,l.nv)((0,l.__)("%s only selected %s","wp-migrate-db"),U[A],k),except:(0,l.nv)((0,l.__)("%s all %s <b>except</b> those selected","wp-migrate-db"),U[A],k)},G=P(n,a,_,k,"pull"===A?p:d),J=G.enabled,M=G.isOpen,R=G.selected,Z=G.selectionEmpty;(0,i.useEffect)(()=>{"select"===n["".concat(k,"_option")]&&C(e.updateSelected(R,k)),"except"===n["".concat(k,"_option")]&&e.updateExcluded(R,k)},[]),J&&!M&&(I=!0);var D=[],V="selected"===n["".concat(k,"_option")]||"except"===n["".concat(k,"_option")];I&&D.push("has-divider"),J&&D.push("enabled");var z={muplugins:(0,l.__)("Select any must-use plugins to be included in the migration.","wp-migrate-db"),others:(0,l.__)("Select any other files and folders found in the <code>wp-content</code> directory to be included in the migration.","wp-migrate-db"),core:(0,l.__)("Including WordPress core files ensures that the exported archive contains the exact version of WordPress installed on this site, which is helpful when replicating the site in a new environment. ","wp-migrate-db")},Q=(0,x.Ri)(j,c,d,p);return i.createElement(m.A,{title:N,className:D.join(" "),panelName:j,disabled:S,writable:Q,enabled:J,forceDivider:I,callback:t=>(0,b.Qi)(t,j,M,J,S,e.addOpenPanel,e.removeOpenPanel,()=>C((0,r.m6)(j))),toggle:(0,r.m6)(j),hasInput:!0,bodyClass:"tpf-panel-body",panelSummary:i.createElement(g,(0,o.A)({},e,{disabled:S,items:T(),selected:R,title:N,type:j,summary:W[n["".concat(k,"_option")]]}))},i.createElement("div",null,["others","muplugins","core"].includes(k)&&i.createElement("p",{className:"panel-instructions"},(0,u.Ay)(z[k]),"core"===k&&i.createElement(O.A,{link:"https://deliciousbrains.com/wp-migrate-db-pro/doc/full-site-exports/",content:(0,l.__)("Learn When to Include Core Files","wp-migrate-db"),utmContent:"wordpress-core-files-panel",utmCampaign:"wp-migrate-documentation",hasArrow:!0,anchorLink:"wordpress-core-files"})),!["others","muplugins","core"].includes(k)&&i.createElement(E,{ariaLabel:(0,l.nv)((0,l.__)("%s options","wp-migrate-db"),k),optionChoices:W,intent:"push",type:k,value:n["".concat(k,"_option")],updateOption:r.ZR}),"core"!==k&&i.createElement(w.A,{id:"".concat(k,"-multiselect"),options:T(),extraLabels:"",stateManager:t=>{"except"===n["".concat(k,"_option")]&&e.updateExcluded(t,k),e.updateSelected(t,k)},selected:R,visible:!0,disabled:!V,updateSelected:t=>{var a=t.map(e=>e.path);"except"===n["".concat(k,"_option")]?e.updateExcluded(a,k):e.updateSelected(a,k)},selectInverse:()=>"except"===n["".concat(k,"_option")]?(0,v.A)(e.updateExcluded,L,R,k):(0,v.A)(e.updateSelected,L,R,k),showOptions:V,type:k,themePluginOption:n["".concat(k,"_option")]})),"core"!==k&&i.createElement("div",{className:"excludes-wrap"},i.createElement(h.A,(0,o.A)({},e,{excludes:n["".concat(k,"_excludes")],excludesUpdater:e.updateExcludes,type:k}))),Z&&"selected"===n["".concat(k,"_option")]&&i.createElement(y.A,{type:"danger"},(0,l.nv)((0,l.__)("Please select at least one %s for migration","wp-migrate-db"),{themes:"theme",plugins:"plugin",muplugins:"must-use plugin",others:"file or directory",core:"file or directory"}[k])),Z&&"except"===n["".concat(k,"_option")]&&i.createElement(y.A,{type:"danger"},(0,l.nv)((0,l.__)("Please select at least one %s to exclude from migration","wp-migrate-db"),"themes"===k?"theme":"plugin")))};var S=n(57524),C=(n(44319),n(48665)),N=n(44016);function k(e,t){var n={};return["themes","plugins","muplugins","others","core"].forEach((i,l)=>{var s="pull"===t?e.remote_site.site_details[i]:e.local_site.site_details[i],r="pull"===t||"savefile"===t?e.local_site.site_details[i]:e.remote_site.site_details[i],o=s,c=[],p=e=>{if(r){var t=r[e];if(t&&t[0].hasOwnProperty("version"))return t[0].version}return null};for(var u in o){var m=o[u];if(m){var d={name:m[0].name,path:m[0].path};["plugins","themes"].includes(i)&&"savefile"!==t&&(d=(0,a.A)((0,a.A)({},d),{},{active:m[0].active,sourceVersion:m[0].version,destinationVersion:p(u)})),c.push(d)}}return n[i]=c}),n}var j=e=>{var t=k(e,e.current_migration.intent).themes;return A(e,{title:(0,l.__)("Themes","wp-migrate-db"),type:"themes",panel_name:"theme_files",items:t})},F=e=>{var t=k(e,e.current_migration.intent).plugins;return A(e,{title:(0,l.__)("Plugins","wp-migrate-db"),type:"plugins",panel_name:"plugin_files",items:t})},T=e=>{var t=k(e,e.current_migration.intent).muplugins;return 0===t.length?null:A(e,{title:(0,l.__)("Must-Use Plugins","wp-migrate-db"),type:"muplugins",panel_name:"muplugin_files",items:t})},L=e=>{var t=k(e,e.current_migration.intent).others;return 0===t.length?null:A(e,{title:(0,l.__)("Other Files","wp-migrate-db"),type:"others",panel_name:"other_files",items:t})},I=e=>{var t=e.current_migration.intent,n=k(e,t).core;return"savefile"!==t||0===n.length?null:A(e,{title:(0,l.__)("WordPress Core Files","wp-migrate-db"),type:"core",panel_name:"core_files",items:n})};const U=(0,s.Ng)(e=>{var t=(0,S.jG)("current_migration",e),n=(0,S.jG)("local_site",e),a=(0,S.jG)("remote_site",e),i=(0,C.o)("panelsOpen",e),l=(0,S.ud)("stages",e),s=(0,S.w1)("status",e);return{theme_plugin_files:e.theme_plugin_files,current_migration:t,local_site:n,remote_site:a,panelsOpen:i,stages:l,status:s}},{toggleThemePluginFiles:r.m6,updateTPFOption:r.ZR,updateSelected:r.JE,updateExcluded:r.mf,togglePanelsOpen:N.SZ,addOpenPanel:N._t,removeOpenPanel:N.Tz,updateExcludes:r.tl,kickOffTPFStage:r.OU})(e=>i.createElement("div",{className:"theme-plugin-files"},i.createElement(j,e),i.createElement(F,e),i.createElement(T,e),i.createElement(L,e),i.createElement(I,e)))}}]);