(self.webpackJSONPwpmdb=self.webpackJSONPwpmdb||[]).push([[203],{42634:()=>{},79886:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var n,i=a(58168),l=a(52888),r=a(94263),s=a.n(r),d=a(82511),o=a(45494),m=a(95274),c=a(83649),p=a.n(c),u=a(48895),_=a.n(u),b=a(51572),w=a(9339),f=a(44016),v=(a(68906),a(48665)),g=a(46970),E=a(31775),h=a(57524),y=a(79764),N=a(1626),O=a(84255),M=a(7880),k=a(54771),x=a(9640),D=a.n(x),A=(a(98603),a(33801));function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},P.apply(null,arguments)}const C=e=>l.createElement("svg",P({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=l.createElement("path",{d:"M13.444 2.5H2.556C1.696 2.5 1 3.122 1 3.889v9.722C1 14.378 1.696 15 2.556 15h10.888c.86 0 1.556-.622 1.556-1.389V3.89c0-.767-.696-1.389-1.556-1.389ZM11 1v3M5 1v3M1 8h14",stroke:"#B3B3B3",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})));a.p;const T=(0,d.Ng)((e=>({media_files:e.media_files})),{updateMFDate:w.xB})((e=>{var t=e.media_files.date,a=(0,l.useState)(!1),n=(0,O.A)(a,2),i=n[0],r=n[1],s=(0,l.useRef)(null),d=e=>{s.current.contains(e.target)||setTimeout((()=>{r(!1)}),50)};(0,l.useEffect)((()=>(i?document.addEventListener("mousedown",d):document.removeEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)})),[i]);var m=(0,M.pn)(i,null,{from:{opacity:0,marginTop:-25},enter:{opacity:1,marginTop:0},leave:{opacity:0,marginTop:-25}});return t&&""!==t||(t=Date.now()),l.createElement("div",{className:"datepicker-wrap",ref:s},l.createElement("div",null,l.createElement("div",{tabIndex:"0",onClick:()=>{r(!0)},onKeyPress:e=>{"Enter"===e.key&&r(!0)},className:"media-date"},l.createElement(C,null),l.createElement("span",null,t?_()(t,"mmmm d yyyy @ hh:MM TT"):""))),m.map((a=>{var n=a.item,s=a.key,d=a.props;return n&&l.createElement(D(),{active:i},l.createElement(M.CS.div,{key:s,style:d,className:"datepicker-box"},l.createElement(k.K7,{currentDate:t||Date.now(),tabIndex:"0",onChange:t=>{e.updateMFDate(t)},is12Hour:!0,isInvalidDate:e=>{var t=new Date;return e.setHours(0,0,0,0),t.setHours(0,0,0,0),e>=new Date}}),l.createElement("div",{className:"close-wrap"},l.createElement("button",{onClick:()=>{r(!1)},className:"close-picker"},l.createElement(A.h,{"aria-hidden":!0}),l.createElement("span",{className:"screen-reader-text"},(0,o.__)("Close Date Picker","wp-migrate-db"))))))})))}));var F=a(16930),L={pull:(0,o.__)("Pull","wp-migrate-db"),push:(0,o.__)("Push","wp-migrate-db"),savefile:(0,o.__)("Export","wp-migrate-db")},S=e=>{var t=e.selected,a=e.labelledby;return l.createElement("div",null,l.createElement("input",{className:"media-option-radio",type:"radio",name:"media-option",checked:t,"aria-labelledby":a,readOnly:!0}))},I=e=>{var t=e.description,a=e.currentOption,n=e.intent,i=e.optionName,r=e.postDescription,s=e.className,m=e.label,c=(0,d.wA)(),p="media-".concat(i);return l.createElement("div",{onClick:()=>{(t=>{if(a===t)return null;c(e.setMediaOption(t))})(i)},className:"media-option ".concat(s||"")},l.createElement(S,{labelledby:p,selected:i===a}),l.createElement("div",null,l.createElement("strong",{id:p},(0,o.nv)(m,L[n])),l.createElement("div",{className:"option-description"},t),l.createElement("div",null,l.createElement("b",null,r))),l.createElement("div",{className:"datepicker-container"},"new"===i&&"new"===a&&l.createElement(T,null)))};const B=(0,d.Ng)((e=>{var t=e.profiles.profile_loading,a=(0,v.o)("panelsOpen",e),n=(0,h.ud)("status",e),i=e.profiles.loaded_profile;return{isLoading:t,panel_info:e.panels,migration:e.migrations,current_migration:e.migrations.current_migration,addons:e.addons,media_files:e.media_files,status:n,panelsOpen:a,loaded_profile:i}}),{toggleMediaFiles:w.SJ,setMediaOption:w.Ke,togglePanelsOpen:f.SZ,addOpenPanel:f._t,removeOpenPanel:f.Tz,updateMFExcludes:w.kn,updateMFDate:w.xB})((e=>{var t=e.media_files,a=e.panelsOpen,n=e.status,r=e.migration,c=r.current_migration,u=r.local_site,f=c.intent,v=c.twoMultisites,h=c.localSource,O=t.enabled,M=(0,d.wA)(),k="undefined"!==typeof t.available&&!t.available,x=p()(n,{name:"MF_INVALID_DATE"}),D=p()(n,{name:"MF_OPTION_NULL"}),A=(0,d.d4)((e=>e.multisite_tools)),P={all:(0,o.__)("%s all media uploads","wp-migrate-db"),new:(0,o.__)("%s media uploads by date","wp-migrate-db"),new_subsequent:(0,o.__)("%s new and updated media uploads","wp-migrate-db")},C={all:A.enabled?(()=>{var e=h&&"false"===u.is_multisite||!h&&"true"===u.is_multisite;return!v&&e?(0,o.__)("Copies all files to the uploads folder of the subsite","wp-migrate-db"):(0,o.__)("Copies all files from the uploads folder of the subsite","wp-migrate-db")})():(0,o.__)("Copies all files from the uploads folder","wp-migrate-db"),new:(0,o.__)("Copies new and modified files after a specific date","wp-migrate-db"),new_subsequent:(0,o.__)("Copies new and modified files since the last migration","wp-migrate-db")},T=e=>!s()(a,"media_files")&&t.option&&t.enabled?l.createElement(l.Fragment,null,(0,o.nv)(P[t.option],L[f])):null,S=a.includes("media_files"),B=!1;O&&!S&&(B=!0);var K=[];return B&&K.push("has-divider"),O&&K.push("enabled"),l.createElement("div",{className:"media-files"},l.createElement(b.A,{title:(0,o.__)("Media Uploads","wp-migrate-db"),className:K.join(" "),panelName:"media_files",disabled:k,enabled:O,panelSummary:l.createElement(T,(0,i.A)({disabled:k,labels:P},e)),forceDivider:B,callback:t=>(0,E.Qi)(t,"media_files",S,O,k,e.addOpenPanel,e.removeOpenPanel,(()=>M((0,N.b)(y.yX)))),toggle:(0,w.SJ)(),hasInput:!0},l.createElement("div",{className:"media-files-inner-wrap"},l.createElement("div",{className:"media-files-options"},l.createElement(I,{description:C.all,label:P.all,currentOption:t.option,optionName:"all",intent:f,setMediaOption:w.Ke}),l.createElement(I,{description:C.new_subsequent,label:P.new_subsequent,postDescription:t.last_migration&&""!==t.last_migration?_()(t.last_migration,"(mmmm d yyyy @ hh:MM TT)"):"",currentOption:t.option,optionName:"new_subsequent",intent:f,setMediaOption:w.Ke}),l.createElement(I,{description:C.new,label:P.new,currentOption:t.option,optionName:"new",intent:f,setMediaOption:w.Ke,className:"option-wrap"})),l.createElement("div",{className:"media-files-excludes excludes-wrap"},l.createElement(g.A,(0,i.A)({},e,{excludes:t.excludes,excludesUpdater:e.updateMFExcludes,type:"media"})))),x&&l.createElement(F.A,{type:"danger"},(0,m.Ay)((0,o.__)('The date selected <a href="https://www.youtube.com/watch?v=G3AfIvJBcGo" target="_blank" rel="noopener noreferrer">is in the future</a>, please select a valid date.',"wp-migrate-db"))),D&&l.createElement(F.A,{type:"danger"},(0,m.Ay)((0,o.__)("Please select a media option above.","wp-migrate-db")))))}))}}]);